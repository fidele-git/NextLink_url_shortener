<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}NexLink - Shorten Your Connections{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0062ff",
                        "background-soft": "#f5f7fa",
                        "card-bg": "#ffffff",
                        "slate-850": "#f8fafc", /* Repurposing for light theme consistency */
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "2xl": "2rem",
                    },
                    boxShadow: {
                        "soft": "0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05)",
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f5f7fa;
            color: #1e293b;
            font-family: 'Inter', sans-serif;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>

<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <nav class="p-6 flex justify-between items-center max-w-7xl mx-auto">
        <a href="{% url 'landing' %}" class="text-2xl font-bold text-slate-900 flex items-center gap-2">
            <span class="size-8 bg-primary rounded-full flex items-center justify-center text-white scale-90">
                <span class="material-symbols-outlined text-[18px]">link</span>
            </span>
            Nex<span class="text-primary">Link</span>
        </a>
        <div class="space-x-8 text-sm font-semibold text-slate-600">
            {% if user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="hover:text-primary transition-colors">Dashboard</a>
            <a href="{% url 'profile' %}" class="hover:text-primary transition-colors">Profile</a>
            <form action="{% url 'account_logout' %}" method="post" class="inline">
                {% csrf_token %}
                <button type="submit" class="hover:text-red-500 transition-colors">Logout</button>
            </form>
            {% else %}
            <a href="{% url 'account_login' %}" class="hover:text-primary transition-colors">Login</a>
            <a href="{% url 'account_signup' %}"
                class="bg-primary hover:bg-blue-700 px-6 py-2.5 rounded-full text-white transition-all shadow-md shadow-blue-500/20 active:scale-95">Sign
                Up</a>
            {% endif %}
        </div>
    </nav>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="mt-20 p-10 text-center text-gray-400 border-t border-gray-800">
        <p>&copy; 2026 NexLink. All rights reserved.</p>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 flex flex-col gap-4"></div>

    <script>
        // Copy to clipboard helper
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showToast('Link copied to clipboard!', 'success');
            } catch (err) {
                console.error('Failed to copy: ', err);
                showToast('Failed to copy link.', 'error');
            }
        }

        // Global Toast Notification System
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');

            // Icons based on type
            const icon = type === 'success' ? 'check_circle' : 'error';
            const colorClass = type === 'success' ? 'text-green-500' : 'text-red-500';

            toast.className = `transform translate-y-full opacity-0 transition-all duration-300 ease-out bg-white border border-slate-100 shadow-soft rounded-2xl p-4 flex items-center gap-3 min-w-[300px]`;
            toast.innerHTML = `
                <span class="material-symbols-outlined ${colorClass}">${icon}</span>
                <p class="text-sm font-bold text-slate-700">${message}</p>
            `;

            container.appendChild(toast);

            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove('translate-y-full', 'opacity-0');
            });

            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.add('translate-y-full', 'opacity-0');
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }
    </script>
</body>

</html>